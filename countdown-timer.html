<link rel="import" href="/bower_components/polymer/polymer.html">

<!--
`countdown-timer`
A timer element using Polymer

If you want to have timer till 8th december, 2016 then just w rite
`<countdown-timer date="8" month="12" year="2016"></countdown-timer>`

@demo demo/index.html 
-->

<dom-module id="countdown-timer">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <h1>Days: {{days}}</h1>
    <h1>Hours: {{hours}}</h1>
    <h1>Minutes: {{minutes}}</h1>
    <h1>Seconds: {{seconds}}</h1>

  </template>

  <script>
    Polymer({

      is: 'countdown-timer',

      properties: {

        /** Enter date of that day when you want to stop countdown */
        date: {
          type: Number
        },

        /** Enter month of that day when you want to stop countdown */
        month: {
          type: Number
        },

        /** Enter Year of that day when you want to stop countdown */
        year: {
          type: Number
        }

      },

      ready: function () {
        this.endDateEpoch = new Date(this.year, this.month - 1, this.date).valueOf() / 1000;
      },

      attached: function () {
        this.tick();
        this.timer = setInterval(this.tick.bind(this), 1000);
      },

      detached: function () {
        clearInterval(this.timer);
      },

      /** Updates the view according to the endTime */
      tick: function () {
        var difference = this.endDateEpoch - Math.floor(Date.now() / 1000);
        this.days = Math.floor(difference / (24 * 60 * 60));
        difference = difference - (this.days * (24 * 60 * 60));
        this.hours = Math.floor(difference / (60 * 60));
        difference = difference - (this.hours * (60 * 60));
        this.minutes = Math.floor(difference / 60);
        this.seconds = difference % 60;
      }

    });
  </script>
</dom-module>
